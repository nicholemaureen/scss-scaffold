// @file mixins.scss

// @link http://csswizardry.com/2016/02/mixins-better-for-performance/

// Provide a hover effect for non-touch devices, turn it into an Active state for mobile, and maintain a fallback.
// @requires Modernizr as a JS dependency to get .no-touch classes
// Adds styles via @content
// @jhogue
//
@mixin touch-hover( $disabled: false ) {
	$modernizr-hook-off: 'no-touch';
	$modernizr-hook-on: 'touch';

	@if $disabled {
		.no-js &,
		.no-js &:hover, // the fallback
		.no-js &:focus,
		.js.#{$modernizr-hook-off} &,
		.js.#{$modernizr-hook-off} &:hover, // enhanced for no-touch
		.js.#{$modernizr-hook-off} &:focus,
		.js.#{$modernizr-hook-on} &,
		.js.#{$modernizr-hook-on} &:active { // relay same styles to active for touch devices
			@content;
		}
	} @else {
		.no-js &:hover, // the fallback
		.no-js &:focus,
		.js.#{$modernizr-hook-off} &:hover, // enhanced for no-touch
		.js.#{$modernizr-hook-off} &:focus,
		.js.#{$modernizr-hook-on} &:active { // relay same styles to active for touch devices
			@content;
		}
	}
}

// Column Grid
// Simple mixin to display the grid - options are either 2, 3, or 4
// @param number of columns
// @usage column-grid(2)
// @johncionci
@mixin column-grid( $columns: null ) {
	@if $columns == 3 {
		@include span-columns(4);
	} @else if $columns == 4 {
		@include span-columns(3);
	} @else {
		@include span-columns(6);
	}
}

// List Reset
// Remove the margin, padding, and bullets from lists
// @johncionci
//
@mixin list-reset() {
	list-style-type: none;
	margin: 0;
	padding: 0;
}

// Accessible show/hide
// @jhogue
@mixin hide() {
	display: none;
	visibility: hidden;
}

@mixin show( $display: block ) {
	display: $display;
	visibility: visible;
}

// Provide REM and PX fallback for any property
// Gulp used to do this for us, but Brunch does not
// @accepts: css property, numeric value
// @requires: value must be a pixel value, stripped of its unit
// @dependson: px(), a function of ours, and rem(), a function of Bourbon
// @returns: two property values, one with px, one with rem units
// @jhogue
@mixin rem($property, $value) {
	$number: strip-units($value * 1);
	$declaration: unquote($property);
	// scss-lint:disable DuplicateProperty
	#{$declaration}: px($number);
	#{$declaration}: rem($number);
}
// Alias of the above
@mixin rem-fontsize($value) {
	@include rem('font-size', $value);
}


// Output a little 'tag' on the body:after content
// @accepts: string
// @requires: $content string should be in single quotes
// @returns: entire body pseudo-class declaration
// @usage: @include javascript_tag( 'actionhook' );
// @jhogue
@mixin javascript-listener( $content ) {
	body:after {
		content: $content; 
		display: none; 
		speak: none; 
	}
}